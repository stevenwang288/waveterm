# WAVE 版本功能与侧边栏评估（2026-02-15）

## 版本结论
- 当前交付基于本地改造分支，并完成了官方 `upstream/main`（v0.14.0 阶段）核心能力收口。
- 本轮重点问题已闭环：终端灰底问题修复、分屏 `Tab/Shift+Tab` 切换恢复、颜色方案对齐 Windows Terminal。

## 本版功能总览

### 1) 终端与显示体验
- 默认终端主题已改为 `campbell`（与本机 Windows Terminal 默认方案一致）。
- `default-dark` 的 ANSI `black` 调整为纯黑，避免灰底感。
- 补齐 `COLORTERM=truecolor` 环境变量注入（本地启动与 swap token 两条链路），提升 24-bit 颜色识别稳定性。
- 分屏焦点切换支持：
  - `Ctrl+Tab` / `Ctrl+Shift+Tab`
  - `Tab` / `Shift+Tab`（在可安全拦截场景启用，不抢输入框按键）

### 2) AI 与会话能力
- AI 面板、消息流、工具调用链路稳定性增强。
- 支持 OpenAI Chat Images 内容部件链路（可用模型下的图像内容处理）。
- 引入/收口了 v0.14 阶段相关 AI 与作业事件能力（job events、terminal command types、connect error codes）。

### 3) 连接与后端能力
- 连接状态监控增强（包括 SSH “stalled” 检测路径）。
- 初始命令超时从 5s 提升到 30s（慢启动环境更稳）。
- Windows 编译相关修复已并入。

### 4) 编辑器与前端交互
- Monaco resize 修复并入。
- 多处前端交互与布局细节收口，含 v0.14 onboarding/动画更新。

### 5) 本地定制功能（本仓改造）
- ClawX 视图与入口集成（含 `wave_scope` 上下文透传）。
- 侧边栏能力扩展（Git/ClawX/AI/设置快捷入口）。
- 终端与路径上下文相关改造保持保留。

## 左侧侧边栏：功能清单

当前侧边栏主要由两层组成：

### A. 默认 Widget（配置驱动）
来自 `pkg/wconfig/defaultconfig/widgets.json`：
- `terminal`
- `files`
- `explorer`
- `web`
- `clawx`
- `ai`
- `sysinfo`

### B. 工具快捷区（代码内固定入口）
来自 `frontend/app/workspace/widgets.tsx`：
- Explorer 连接按钮（随焦点块上下文）
- Apps（dev 或 feature 开启时）
- Git 侧面板入口
- ClawX 快捷入口（含右键菜单：默认/本地/localhost）
- AI 启动菜单（多命令模板）
- 设置入口

并支持 `normal / compact / supercompact` 三档自适应显示。

## 左侧侧边栏：可用性评估

### 现状评价
- 总体可用性：`良好（7.8/10）`
- 优点：
  - 高频能力（终端/文件/探索/Git/AI）入口齐全。
  - ClawX 支持右键多目标启动，灵活性高。
  - 高度不足时自动压缩布局，避免溢出。

### 主要可用性问题
- ClawX 存在“默认 widget 入口 + 工具区快捷入口”双入口，用户容易困惑“区别是什么”。
- AI 图标语义存在不一致（widget 与快捷区图标/交互模式不同）。
- 右键菜单能力较强，但“可右键”发现性偏弱。
- supercompact 模式下标签消失后，新用户学习成本上升。

### 建议（下一轮）
- 合并或明确 ClawX 双入口语义（比如一个固定“打开”，一个固定“上下文打开”并改名）。
- 统一 AI 入口图标与文案。
- 对支持右键高级菜单的入口增加轻提示（首次提示或悬浮提示）。
- 在 supercompact 下保留关键入口的最小可识别标记。

## 当前验证状态
- 用户现场确认：颜色结果“这次是对的”。
- 构建验证：`npm run build:dev` 已通过。
- 代码状态：当前工作区为 clean，可继续执行打包与发布流程。

